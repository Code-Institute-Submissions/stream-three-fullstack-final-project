{% extends 'base.html'%}
{% load static %}
{% block head_js %}
<script defer type="text/javascript" src="{% static '/js/utility.js' %}"></script>
<script defer type="text/javascript" src="{% static '/js/head.js' %}"></script>
<script defer type="text/javascript" src="{% static '/js/payment.js' %}"></script>
<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
<script type="text/javascript">
    //<![CDATA[
    Stripe.publishableKey = '{{ publishable }}';
    //]]>
</script>
<script type="text/javascript" src="{% static 'js/stripe.js' %}"></script>
{% endblock %}
{% block content %}
{% include 'header.html' %}
<section class="payment-container">
    <i class="fas fa-credit-card payment-icon" aria-hidden="true"></i>
    <h1 class="payment-heading">Cycle Payment</h1>
    <!--<p class="payment-text">Please check the details below are correct before paying.</p>-->
    <p class="payment-text">You are paying for Cycle with Fileo ID: {{ cycle.id }}</p>
    <p class="payment-text">Please check your details are correct before proceeding.</p>
    
    <form id="payment-form" class="payment-form" method='POST'>
        {% csrf_token %}
       <div class="payment-form__details">
           <p><strong>Your Information</strong></p>
            {{ order_form.as_p }}
        </div>
        <div id="credit-card-errors" style="display:none">
            <p class="alert-message block-message error payment-error" id="stripe-error-message"></p>
        </div>
        <div class="payment-form__pay">
            <p><strong>Payment Details</strong></p>
            {{ payment_form.as_p}}
            <p><strong>Total: Â£{{ total }}</strong></p>
            <button class="payment-form__button" type='submit'>Checkout <i class="fas fa-shopping-cart" aria-hidden="true"></i></button>
        </div>
        
    </form>
    <div>
        {% for message in messages %}
        <p> {{ message }}</p>
        {% endfor %}
    </div>
</section>
{% endblock %}