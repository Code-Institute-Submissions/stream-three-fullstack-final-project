{% extends 'base.html'%}
{% load static %}
{% block head_js %}
<script defer type="text/javascript" src="{% static '/js/utility.js' %}"></script>
<script defer type="text/javascript" src="{% static '/js/head.js' %}"></script>
<script defer type="text/javascript" src="{% static '/js/payment.js' %}"></script>
<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
<script type="text/javascript">
    //<![CDATA[
    Stripe.publishableKey = '{{ publishable }}';
    //]]>
</script>
<script type="text/javascript" src="{% static 'js/stripe.js' %}"></script>
{% endblock %}
{% block content %}
{% include 'header.html' %}
<section class="payment-container">
    <h1>Payment</h1>
    <h2>Total: Â£{{ total }}</h2>
    <div id="credit-card-errors" style="display:none">
        <div class="alert-message block-message error" id="stripe-error-message"></div>
    </div>
    <form id="payment-form" method='POST'>
        {% csrf_token %}
        {{ order_form.as_p }}
        {{ payment_form.as_p}}
        <button type='submit'>Pay</button>
    </form>
    <div>
        {% for message in messages %}
        <p> {{ message }}</p>
        {% endfor %}
    </div>
</section>
{% endblock %}