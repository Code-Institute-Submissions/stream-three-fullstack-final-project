{% extends 'base.html' %}
{% block content %}
<h1>Cycle Porthole</h1>
<p>You are logged in as {{ context.username }}</p>
<p>Fileo Cycle ID: {{ context.cycle_id }}</p>
<p>Client: {{ context.client.username }}</p>
<h2>Job Title</h2>
<h3>{{ context.cycle.job_title }}</h3>
<p>@{{ context.cycle.location }}</p>
<h3>Description</h3>
<P>{{ context.cycle.description }}</P>
<h3>Job Value</h3>
{% if context.quote.cycle_value %}
<p>{{ context.quote.cycle_value }}</p>
{% else %}
<p>Cycle Value not entered yet.</p>
{% endif %}
<hr>
<div>
    <h3>Upload Your Quote</h3>
    <img alt='Show image of PDF icon if uploaded'>
    <form method="POST" enctype="multipart/form-data" action="{% url 'quote_upload' username=context.username cycle_id=context.cycle.id client_username=context.cycle.client %}">
        {% csrf_token %}
        {{ context.quote_form.as_p }}
        <button type="submit">Submit</button>
    </form>
    <ul>
        <li><a href="{{ context.quote.file.url }}" download="">Download File</a></li>
        <li><a href="{{ context.quote.file.url }}" target="_blank">View in Browser</a></li> 
    </ul>
    <div>
        <h4>Quote Status</h4>
        <div>
            <form action="" method="POST">
                {% csrf_token %}
                <div>
                    <label for="contest">
                    <input type="radio" id="contest" value="contest" name="quote_status">
                    <span>Contest</span>
                    </label>
                </div>  
                <div>
                    <label for="approve">
                        <input type="radio" id="approve" value="approve" name="quote_status" checked>
                        <span>Approve</span>
                    </label>
                </div>
                <div>
                    <label for="urgent">
                        <input type="radio" id="urgent" value="urgent" name="quote_status">
                        <span>Flag as Urgent</span>
                    </label>
                </div>
                <div>
                    <textarea type="text" name="quote_comments"></textarea>
                </div>
                <div>
                    <button type="submit">Submit</button>
                </div>
            </form>
        </div>
    </div>
    {% for message in messages %}
    {{ message }}
    {% endfor %}
</div>
<hr>
<div>
    <h3>Upload Your PO</h3>
    <img alt='Show image of PDF icon if uploaded'>
    <form method="POST" enctype="multipart/form-data" action="{% url 'po_upload' username=context.username cycle_id=context.cycle.id client_username=context.cycle.client %}">
        {% csrf_token %}
        {{ context.po_form.as_p }}
        <button type="submit">Submit</button>
    </form>
    <ul>
        <li><a href="{{ context.po.file.url }}" download>Download File</a></li>
        <li><a href="{{ context.po.file.url }}" target="_blank">View in Browser</a></li> 
    </ul>
    <div>
        <h4>PO Status</h4>
        <div>
            <form action="" method="POST">
                {% csrf_token %}
                <div>
                    <label for="contest">
                    <input type="radio" id="contest" value="contest" name="po_status">
                    <span>Contest</span>
                    </label>
                </div>  
                <div>
                    <label for="approve">
                        <input type="radio" id="approve" value="approve" name="po_status" checked>
                        <span>Approve</span>
                    </label>
                </div>
                <div>
                    <label for="urgent">
                        <input type="radio" id="urgent" value="urgent" name="po_status">
                        <span>Flag as Urgent</span>
                    </label>
                </div>
                <div>
                    <textarea type="text" name="po_comments"></textarea>
                </div>
                <div>
                    <button type="submit">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>
<hr>
<div>
    <h3>Upload Your Invoice</h3>
    <img alt='Show image of PDF icon if uploaded'>
    <form method="POST" enctype="multipart/form-data" action="{% url 'invoice_upload' username=context.username cycle_id=context.cycle.id client_username=context.cycle.client %}">
        {% csrf_token %}
        {{ context.invoice_form.as_p }}
        <button type="submit">Submit</button>
    </form>
    <ul>
        <li><a href="{{ context.invoice.file.url }}" download>Download File</a></li>
        <li><a href="{{ context.invoice.file.url }}" target="_blank">View in Browser</a></li> 
    </ul>
    <div>
        <h4>Invoice Status</h4>
        <div>
            <form action="" method="POST">
                {% csrf_token %}
                <div>
                    <label for="contest">
                    <input type="radio" id="contest" value="contest" name="invoice_status">
                    <span>Contest</span>
                    </label>
                </div>  
                <div>
                    <label for="approve">
                        <input type="radio" id="approve" value="approve" name="invoice_status" checked>
                        <span>Approve</span>
                    </label>
                </div>
                <div>
                    <label for="urgent">
                        <input type="radio" id="urgent" value="urgent" name="invoice_status">
                        <span>Flag as Urgent</span>
                    </label>
                </div>
                <div>
                    <textarea type="text" name="invoice_comments"></textarea>
                </div>
                <div>
                    <button type="submit">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>
<hr>
{% endblock %}